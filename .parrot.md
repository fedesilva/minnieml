# MML Project Guidelines

## Build/Test Commands
- Full build: `sbt compile`
- Run all tests: `sbt test`
- Run module tests: `sbt "mmlclib/test"`
- Run single test: `sbt "mmlclib/testOnly mml.mmlclib.grammar.OpTests"`
- Run specific test case: `sbt "mmlclib/testOnly mml.mmlclib.grammar.OpTests -- -t \"let with simple binop\""`
- Format code: `sbt scalafmtAll`
- Format and fix code: `sbt scalafix`

## Coding Style
- **Scala Version**: 3.5.0 with strict `-new-syntax`
- **Imports**: Group and order cats imports, use `cats.syntax.all.*`
- **Enums**: Use `enum X derives CanEqual` for proper comparison support
- **Cats Patterns**: Prefer `flatTraverse` over nested `flatMap` + `traverse`, use `.asLeft`/`.asRight` for `Either`
- **Cats Syntax**: Use `import cats.syntax.all.*` for common syntax extensions, use .some/.none for Option
- **Error Handling**: Use `Either[CompilationError, T]` with typed errors for functional error handling
- **Functional Style**: Avoid mutation, use immutable data structures, prefer recursion over loops
- **Nesting**: Keep nesting levels shallow (3-4 max), extract methods for complex logic
- **Testing**: Use `munit.CatsEffectSuite` with `BaseEffFunSuite` helpers for IO-based tests
- **Comments**: Comment complex logic, use doc-comments for public API

Follow the `.scalafmt.conf` settings for formatting. Keep code clean and modular.
